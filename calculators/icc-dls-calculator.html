<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ICC DLS Calculator – Duckworth-Lewis-Stern Method</title>
  <meta name="description" content="ICC DLS calculator to compute revised target and par score for rain-affected ODI and T20 matches. Enter R1 and R2 resource percentages for accurate results." />
  <meta name="keywords" content="icc dls calculator, dls target calculator, duckworth lewis stern, par score calculator" />
  <link rel="icon" type="image/svg+xml" href="../favicon.svg">
  <style>
    body{font-family:Segoe UI,system-ui,Arial,sans-serif;background:linear-gradient(135deg,#667eea,#764ba2);min-height:100vh;margin:0;padding:20px}
    .container{max-width:1000px;margin:0 auto}
    .card{background:#fff;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.25);padding:28px}
    .nav-link{display:inline-block;margin-bottom:18px;color:#667eea;text-decoration:none;font-weight:600}
    .header{text-align:center;margin-bottom:22px}
    .header h1{margin:0 0 8px;color:#111827;font-size:28px}
    .header p{margin:0;color:#6b7280}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
    .form-group{margin-bottom:14px}
    label{display:block;font-weight:600;color:#111827;margin-bottom:6px}
    input,select{width:100%;padding:12px 14px;border:2px solid #e5e7eb;border-radius:10px;font-size:15px}
    input:focus,select:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,.12)}
    .btns{display:flex;gap:12px;margin-top:10px}
    button{flex:1;padding:12px 16px;border:none;border-radius:10px;font-weight:700;cursor:pointer}
    .primary{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}
    .muted{background:#f3f4f6;color:#111827}
    .results{background:#f8fafc;border-radius:12px;padding:18px;border-left:4px solid #667eea}
    .result-item{margin-bottom:10px;padding-bottom:10px;border-bottom:1px solid #e5e7eb}
    .result-item:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}
    .result-label{font-weight:600;color:#111827}
    .result-value{font-size:20px;color:#4f46e5;font-weight:800}
    .note{background:#fff7ed;border-left:4px solid #f59e0b;color:#7c2d12;border-radius:8px;padding:12px;margin-top:16px}
    @media(max-width: 820px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <a href="../calculators.html" class="nav-link">← All Calculators</a>
      <div class="header">
        <h1>ICC DLS Calculator</h1>
        <p>Duckworth–Lewis–Stern method: revised target & par score</p>
      </div>
      <div class="grid">
        <div>
          <div class="form-group">
            <label for="team1">Team 1 Score (S)</label>
            <input id="team1" type="number" min="0" value="265" />
          </div>
          <div class="form-group">
            <label for="r1">R1 – Team 1 Resources Used (%)</label>
            <input id="r1" type="number" min="1" max="100" step="0.1" value="100" />
          </div>
          <div class="form-group">
            <label for="r2">R2 – Team 2 Resources Available (%)</label>
            <input id="r2" type="number" min="1" max="100" step="0.1" value="85" />
          </div>

          <div class="form-group">
            <label>Auto Resources (Approx.)</label>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
              <div>
                <small>Team 1: Overs allocated</small>
                <input id="t1OversAllocated" type="number" min="1" max="50" value="50">
                <button class="muted" type="button" style="margin-top:6px" onclick="autoR1()">Auto R1</button>
              </div>
              <div>
                <small>Team 2: Overs remaining</small>
                <input id="t2OversRemaining" type="number" min="1" max="50" value="50">
                <small style="display:block;margin-top:6px">Wickets lost</small>
                <input id="t2WicketsLost" type="number" min="0" max="10" value="0">
                <button class="muted" type="button" style="margin-top:6px" onclick="autoR2()">Auto R2</button>
              </div>
            </div>
            <small>Uses an approximate DLS model for quick R1/R2. You can override manually.</small>
          </div>

          <div class="form-group">
            <label for="team2Current">Team 2 Current Score (optional)</label>
            <input id="team2Current" type="number" min="0" />
          </div>
          <div class="btns">
            <button class="primary" onclick="calcDLS()">Calculate</button>
            <button class="muted" onclick="resetDLS()">Reset</button>
          </div>
        </div>
        <div>
          <div class="results" id="results" style="display:none">
            <div class="result-item">
              <div class="result-label">Revised Target</div>
              <div class="result-value" id="revisedTarget">–</div>
            </div>
            <div class="result-item">
              <div class="result-label">Par Score</div>
              <div class="result-value" id="parScore">–</div>
            </div>
            <div class="result-item" id="aheadBehindRow" style="display:none">
              <div class="result-label">Ahead / Behind</div>
              <div class="result-value" id="aheadBehind">–</div>
            </div>
          </div>
          <div class="note">
            Use ICC DLS resource tables to obtain R1 and R2. Target = floor(S × R2 / R1) + 1.
            Guide: <a href="../blog/dls-formula-calculator-guide.html">DLS explained</a>.
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="../js/dls-resources.js"></script>
  <script>
    function updateAutoMaxes(){
      var mt='odi'; // default ODI for this page
      var Omax=(mt==='t20')?20:50;
      ['t1OversAllocated','t2OversRemaining'].forEach(function(id){var el=document.getElementById(id); if(el){el.max=Omax;}});
    }
    function autoR1(){
      var mt='odi';
      var Oa=parseFloat(document.getElementById('t1OversAllocated').value)||0;
      var Omax=(mt==='t20')?20:50; Oa=Math.max(1, Math.min(Omax, Oa));
      var r=DLSResources.resource(mt, Oa, 0);
      document.getElementById('r1').value=r.toFixed(1);
    }
    function autoR2(){
      var mt='odi';
      var Or=parseFloat(document.getElementById('t2OversRemaining').value)||0;
      var w=parseFloat(document.getElementById('t2WicketsLost').value)||0;
      var Omax=(mt==='t20')?20:50; Or=Math.max(0, Math.min(Omax, Or)); w=Math.max(0, Math.min(10, w));
      var r=DLSResources.resource(mt, Or, w);
      document.getElementById('r2').value=r.toFixed(1);
    }
    function fmt(n){return Number(n).toFixed(0)}
    function calcDLS(){
      const S = parseFloat(document.getElementById('team1').value)
      const R1 = parseFloat(document.getElementById('r1').value)
      const R2 = parseFloat(document.getElementById('r2').value)
      const cur = parseFloat(document.getElementById('team2Current').value)
      if(!(S>0)&&S!==0||!(R1>0)||!(R2>0)){alert('Please enter valid S, R1, R2');return}
      const par = Math.floor((S * R2) / R1)
      const target = par + 1
      document.getElementById('parScore').textContent = fmt(par)+' runs'
      document.getElementById('revisedTarget').textContent = fmt(target)+' runs'
      const row = document.getElementById('aheadBehindRow')
      if(!isNaN(cur)){
        const diff = cur - par
        row.style.display = 'block'
        document.getElementById('aheadBehind').textContent = (diff>=0?('Ahead by '+fmt(diff)+' runs'):('Behind by '+fmt(-diff)+' runs'))
      }else{ row.style.display='none' }
      document.getElementById('results').style.display = 'block'
      if(window.CalcUtils){
        CalcUtils.trackCalculatorUse('ICC DLS Calculator')
        CalcUtils.saveCalculation('ICC DLS Calculator',{S,R1,R2,cur},{par, target})
      }
    }
    function resetDLS(){
      document.getElementById('team1').value=265
      document.getElementById('r1').value=100
      document.getElementById('r2').value=85
      document.getElementById('team2Current').value=''
      document.getElementById('results').style.display='none'
      document.getElementById('aheadBehindRow').style.display='none'
    }
    window.addEventListener('load',()=>{ try{ updateAutoMaxes(); }catch(e){} })
  </script>
  <script src="../js/calculator-utils.js"></script>
</body>
</html>
